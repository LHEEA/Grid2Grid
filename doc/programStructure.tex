\pagebreak
\section{Program Structure}

The program structure of \texttt{Grid2Grid} is depicted in Fig. \ref{fig:grid2GridStructure}. The program is composed of several modules (\texttt{.f90}) which are denoted as \texttt{mod}. HOS wave fields are generated by  \texttt{modSurf2Vol} from the HOS result file (\texttt{modes\_HOS\_SWENSE.dat}). Because the results files only contains modes information, the volumic wave fields is reconstructed on HOS grid by inverse FFTs (denoted as $H_2$ Operator). The volumic wave fields in \texttt{Grid2Grid} are called as snapshot of wave fields because it is re-constructed at certain simulation time and grid of HOS. \texttt{modVol2Vol} constructs the interpolation data structure from several snapshot of wave fields by using multidimensional spline module (\cite{BsplineWilliams}). It can directly communicate with other Fortran language. To communicate with other languages, \texttt{modGrid2Grid} can also be used as it receives input data and return wave fields data by using \texttt{ISO\_C\_BINDING}. \texttt{modPostGrid2Grid} is a post processing module of HOS generating wave fields in VTK format and also wave elevation time series.
\newline

{
    \begin{figure} [H]
    \centering
    \includegraphics[scale=0.62]{images/c1.structure/"Grid2GridStructure".png}
    \caption{Program Structure of \texttt{Grid2Grid}}
    \label{fig:grid2GridStructure}
    \end{figure}
}

\pagebreak

The main feature of each module is following.
\newline

{
\hspace{0.5 cm} -- \texttt{modSurf2Vol} : Wrapper class of HOS-Ocean and HOS-NWT wave fields

\hspace{0.5 cm} -- \texttt{modVol2Vol} : Interpolation of snapshot of wave fields (multiple Surf2Vol Class)

\hspace{0.5 cm} -- \texttt{modGrid2Grid} : Communication with other language with \texttt{ISO\_C\_BINDING}

\hspace{0.5 cm} -- \texttt{modPostGrid2Grid} : Post processing of HOS (wave fields and wave elevation)

\hspace{0.5 cm} -- \texttt{modOceanSurf2Vol} : Re-construction HOS-Ocean wave fields

\hspace{0.5 cm} -- \texttt{modNWTSurf2Vol} : Re-construction HOS-NWT wave fields

\hspace{0.5 cm} -- \texttt{modFourier\_r2c\_FFTW} : Wrapper module of \texttt{FFTW} open library

\hspace{0.5 cm} -- \texttt{modGrid2GridType} : Grid2Grid global variables and auxiliary functions

\hspace{0.5 cm} -- \texttt{bspline-fortran} : Multidimensional b-spline module written in Fortran.
}