\pagebreak
\subsection{modGrid2Grid}

\subsubsection{Description}

\texttt{modGrid2Grid} is not a class but the module which is desinged for the communication between other programming languages. The module structure is depicted in Fig. \ref{fig:modGrid2GridStructure}. It has a data base (DB) which has the input data information and \texttt{Vol2Vol}. The input data is saved in data base and dertermines whether new \texttt{Vol2Vol} is initialized. When the ohter program first initialise \texttt{Grid2Grid}, \texttt{modGrid2Grid} firstly checks the input variables. If the same input is previously given, it return previous \texttt{Vol2Vol} index. But it does not exist, it allocates new \texttt{Vol2Vol} and issues \texttt{Vol2Vol} index. Other programming language distingush the different HOS wave theory in a same simulation by \texttt{HOSIndex} (pointer in \texttt{ISO\_C\_BINDING} is complicate). Therefore the subroutines \texttt{correct} and \texttt{get*} should be called with \texttt{HOSIndex}, position and time.  

The array size of \texttt{modGrid2Grid} is set to be 100 as a default (100 different HOS waves) but it does not consume much of memory because the classes of \texttt{Grid2Grid} are programmed with the dynamic arrays and consequently only a few static data are used. The variable \texttt{nMaxVol2Vol} in \texttt{src/libGrid2Grid/modGrid2Grid.f90} can be changed. 

The functionalities of \texttt{modGrid2Grid} are similar with \texttt{Vol2Vol}. 

\vspace{0.5cm}

{
	\begin{figure} [H]
		\centering
		\includegraphics[scale=0.72]{images/c1.structure/"ModuleGrid2GridStructure".png}
		\vspace{0.5cm}
		\caption{\texttt{Grid2Grid} Module structure}
		\label{fig:modGrid2GridStructure}
	\end{figure}
}

\pagebreak
\subsubsection{Subroutines}	

The interface between other languages with \texttt{modGrid2Grid} will be described in Chap. \ref{chap:interfaceLang}. 

\vspace{0.5cm}

Subroutines : 

\vspace{0.5cm}

-- Initialise Grid2Grid

\hspace{0.5 cm} $\circ$ \texttt{\_\_modgrid2grid\_MOD\_initializegrid2grid} 

\hspace{0.5 cm} $\circ$ \texttt{\_\_modgrid2grid\_MOD\_initializegrid2griddict}
\vspace{0.2cm}

-- Correct Grid2Grid

\hspace{0.5 cm} $\circ$ \texttt{\_\_modgrid2grid\_MOD\_correctgrid2grid}
\vspace{0.2cm}

-- Get wave elevation

\hspace{0.5 cm} $\circ$ \texttt{\_\_modgrid2grid\_MOD\_gethoseta}
\vspace{0.2cm}

-- Get wave velocity

\hspace{0.5 cm} $\circ$ \texttt{\_\_modgrid2grid\_MOD\_gethosu}
\vspace{0.2cm}

-- Get dynamic pressure

\hspace{0.5 cm} $\circ$ \texttt{\_\_modgrid2grid\_MOD\_gethospd}
\vspace{0.2cm}

-- Get flow information 

\hspace{0.5 cm} $\circ$ \texttt{\_\_modgrid2grid\_MOD\_gethosflow}
\vspace{0.2cm}

-- Get HOS simulation end time

\hspace{0.5 cm} $\circ$ \texttt{\_\_modgrid2grid\_MOD\_gethosendtime}
\vspace{0.2cm}

-- Get HOS water depth

\hspace{0.5 cm} $\circ$ \texttt{\_\_modgrid2grid\_MOD\_gethoswaterdepth}
\vspace{0.2cm}

-- Get logical data indicating HOS wave theory is initialized

\hspace{0.5 cm} $\circ$ \texttt{\_\_modgrid2grid\_MOD\_isgrid2gridinitialized}

